\documentclass[a4paper]{article}

\input{./preamble.tex}
\input{./reference.tex}
\input{./symbols.tex}

\usepackage{pgfmath}
\usepackage{pgfcalendar}

\let\d=\pgfcalendarshorthand	% \pgfcalendarshorthand{<kind>}{<representations>}, expand to a <representation> of current date depending on <kind>: d, m, y, etc.
\newcommand\formatdate[2]{\pgfcalendar{cal}{#1}{#1}{#2}}	% use \pgfcalendar to represent the date (#1) in a way specified by #2

\newcommand\firstdate{\year-\month-\day+-14}
\newcommand\lastdate{\year-\month-\day}

\begin{document}

\begin{center}
    \huge{Master Thesis Notes}\\[0.4em]
    \Large{Xiangwen Guan}\\[0.2em]
        From \formatdate{\firstdate}{\d d- \d mt} to
        \formatdate{\lastdate}{\d d- \d mt}	% format the \firstdate and \lastdate using \d
\end{center}

\tableofcontents
\bigskip

\pgfcalendar{cal}{\firstdate}{\lastdate}{% rendering the following codes from \fristdate to \lastdate, the date is given to \d
	\IfFileExists{./\d y0-\d m0-\d d0/note.tex}{
		\marginpar{\vspace*{1em}\textsf{ \d w., \d m. \d d-}}
		\addcontentsline{toc}{section}{\d wt, \d d0 \d m.}
		\def\formatteddate{\d{y}0-\d{m}0-\d{d}0}
		\input{./\formatteddate/note.tex}
	}{}
}
\end{document}
